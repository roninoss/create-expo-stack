<% if (props.stylingPackage?.name === "unistyles") { %>
import './unistyles';
<% } %>
import { ScreenContent } from 'components/ScreenContent';
import { StatusBar } from 'expo-status-bar';

<% if (props.internalizationPackage?.name === "i18next") { %>
  import './translation';
  import { InternalizationExample } from 'components/InternalizationExample';
<% } %>

<% if (props.stylingPackage?.name === "nativewind") { %>
  import './global.css';
<% } else if (props.stylingPackage?.name === "nativewinui") { %>
  import './global.css';
  import 'expo-dev-client';
<% } %>

<% if (props.analyticsPackage?.name === "vexo-analytics") { %>
  import { vexo } from 'vexo-analytics';

  vexo(process.env.EXPO_PUBLIC_VEXO_API_KEY);
<% } %>
<% if (props.authenticationPackage?.name === "convex") { %>
  import { ConvexReactClient } from "convex/react";
  import { ConvexBetterAuthProvider } from "@convex-dev/better-auth/react";
  import { authClient } from "../lib/auth-client";

  const convex = new ConvexReactClient(process.env.EXPO_PUBLIC_CONVEX_URL as string, {
    // Optionally pause queries until the user is authenticated
    expectAuth: true, 
    unsavedChangesWarning: false, 
  });
<% } %>

export default function App() {
  return (
    <% if (props.authenticationPackage?.name === "convex") { %>
      <ConvexBetterAuthProvider client={convex} authClient={authClient}>
        <ScreenContent title="Home" path="App.tsx">
        <% if (props.internalizationPackage?.name === "i18next") { %>
          <InternalizationExample />
        <% } %>
        </ScreenContent>
        <StatusBar style="auto" />
      </ConvexBetterAuthProvider>
    <% } else {%>
      <>
        <ScreenContent title="Home" path="App.tsx">
        <% if (props.internalizationPackage?.name === "i18next") { %>
          <InternalizationExample />
        <% } %>
        </ScreenContent>
        <StatusBar style="auto" />
    </>
    <%}%>
  );
}

